# Quick Start Guide - Deploying Earn9ja to Production

## Overview

This guide will help you deploy your Earn9ja platform to production using:

- **Domain**: earn9ja.site (Hostinger)
- **Backend Hosting**: Render (https://render.com)
- **Legal Docs**: GitHub Pages
- **Mobile Apps**: Google Play Store & Apple App Store

## Why Render?

âœ… **Easier than VPS** - No server management, automatic SSL, auto-deploy  
âœ… **Cost-Effective** - Free tier available, paid plans start at $7/month  
âœ… **Production-Ready** - Auto-scaling, health checks, zero-downtime deploys  
âœ… **Developer-Friendly** - Git-based deployments, environment variables, logs

## Prerequisites

- [ ] Hostinger domain purchased (earn9ja.site) âœ…
- [ ] GitHub account
- [ ] MongoDB Atlas account (free tier available)
- [ ] Redis Cloud account (free tier available)
- [ ] Payment gateway accounts (Paystack, Flutterwave)
- [ ] Twilio account for SMS
- [ ] Gmail account for emails
- [ ] Sentry account for monitoring
- [ ] Google Play Developer account ($25 one-time)
- [ ] Apple Developer account ($99/year)

## Step-by-Step Deployment

### Phase 1: Deploy Backend to Render (2-4 hours)

1. **Sign up at Render**

   - Go to https://render.com
   - Sign up with GitHub
   - Connect your Earn9ja repository

2. **Create Web Service**

   - Click "New +" â†’ "Web Service"
   - Select your repository
   - Name: earn9ja-backend
   - Root Directory: backend
   - Build Command: `npm install && npm run build`
   - Start Command: `npm start`
   - Plan: Standard ($7/month recommended)

3. **Add Environment Variables**

   - Copy all variables from `backend/.env.example`
   - Add them in Render dashboard â†’ Environment tab
   - Generate JWT secrets: `openssl rand -base64 32`
   - Use production credentials for all services

4. **Deploy**
   - Click "Create Web Service"
   - Wait 5-10 minutes for first deployment
   - Test: `curl https://earn9ja-backend.onrender.com/health`

### Phase 2: Configure Domain (1-2 days including DNS propagation)

1. **Add Custom Domain in Render**

   - Go to Settings â†’ Custom Domains
   - Add: api.earn9ja.site
   - Copy the CNAME target

2. **Configure DNS in Hostinger**

   - Log in to Hostinger hPanel
   - Go to Domain â†’ DNS
   - Add CNAME record:
     - Name: api
     - Value: earn9ja-backend.onrender.com
     - TTL: 3600

3. **Wait for DNS Propagation**

   - Check status: https://whatsmydns.net
   - Usually takes 1-4 hours
   - SSL certificate auto-generated by Render

4. **Verify**
   - Test: `curl https://api.earn9ja.site/health`
   - Should return 200 OK

### Phase 3: Host Legal Documents (2-4 hours)

1. **Create GitHub Repository**

   - Name: earn9ja-legal
   - Public repository
   - Initialize with README

2. **Upload Legal Documents**

   - Copy files from `legal-docs/` folder:
     - privacy-policy.md
     - terms-of-service.md
     - data-protection.md
   - Create `_config.yml` with Jekyll theme
   - Create `CNAME` file with: legal.earn9ja.site

3. **Enable GitHub Pages**

   - Settings â†’ Pages
   - Source: main branch, / (root)
   - Custom domain: legal.earn9ja.site
   - Enable HTTPS

4. **Configure DNS**

   - Add CNAME in Hostinger:
     - Name: legal
     - Value: <your-github-username>.github.io
     - TTL: 3600

5. **Verify**
   - Test: https://legal.earn9ja.site/privacy-policy

### Phase 4: Configure Production Services (4-6 hours)

1. **MongoDB Atlas**

   - Create production cluster
   - Whitelist 0.0.0.0/0 (for Render)
   - Create database user
   - Get connection string
   - Add to Render environment variables

2. **Redis Cloud**

   - Create free 30MB database
   - Enable TLS/SSL
   - Get connection string
   - Add to Render environment variables

3. **Payment Gateways**

   - Paystack: Get production API keys
   - Flutterwave: Get production API keys
   - Configure webhooks: https://api.earn9ja.site/api/v1/webhooks/...

4. **Twilio SMS**

   - Purchase phone number
   - Get Account SID and Auth Token
   - Add to Render environment variables

5. **Email (Gmail)**

   - Create app-specific password
   - Add to Render environment variables

6. **Sentry**
   - Create projects for backend and mobile
   - Get DSN keys
   - Add to Render and mobile app

### Phase 5: Build and Submit Mobile Apps (3-7 days)

1. **Update Mobile App Configuration**

   - Edit `Earn9ja/.env`:
     ```
     EXPO_PUBLIC_API_URL=https://api.earn9ja.site/api/v1
     ```
   - Update legal document URLs
   - Update AdMob IDs for production
   - Update Firebase config files

2. **Build Apps**

   ```bash
   cd Earn9ja
   eas build --platform android --profile production
   eas build --platform ios --profile production
   ```

3. **Submit to Stores**
   - Google Play Console: Upload AAB
   - App Store Connect: Upload IPA
   - Add screenshots, descriptions
   - Privacy policy: https://legal.earn9ja.site/privacy-policy
   - Submit for review (1-7 days)

## Post-Deployment Checklist

- [ ] Backend API accessible at https://api.earn9ja.site
- [ ] Legal docs accessible at https://legal.earn9ja.site
- [ ] SSL certificates working (HTTPS)
- [ ] Database connected and indexed
- [ ] Redis cache working
- [ ] Payment webhooks configured
- [ ] Email sending working
- [ ] SMS sending working
- [ ] Sentry error tracking active
- [ ] Mobile apps submitted to stores
- [ ] Monitoring dashboards set up
- [ ] Backup procedures documented

## Monitoring URLs

- **Render Dashboard**: https://dashboard.render.com
- **MongoDB Atlas**: https://cloud.mongodb.com
- **Redis Cloud**: https://redis.com
- **Sentry**: https://sentry.io
- **Google Play Console**: https://play.google.com/console
- **App Store Connect**: https://appstoreconnect.apple.com

## Cost Breakdown

### Monthly Costs

- Hostinger Domain: ~$1.25/month
- Render Standard: $7/month
- MongoDB Atlas M0: Free (or M10 $57/month)
- Redis Cloud: Free 30MB (or $7/month for 250MB)
- Twilio SMS: Pay-as-you-go (~$0.0075/SMS)
- Email: Free (Gmail)
- Sentry: Free tier (or $26/month)
- Firebase: Free tier

**Total: ~$8-100/month** (depending on usage)

### One-Time Costs

- Google Play Developer: $25
- Apple Developer: $99/year

## Next Steps

1. Start with Task 1 in `tasks.md` - Set up Render
2. Follow tasks sequentially
3. Document any issues you encounter
4. Test thoroughly at each stage
5. Keep credentials secure

## Need Help?

- Render Docs: https://render.com/docs
- MongoDB Atlas Docs: https://docs.atlas.mongodb.com
- EAS Build Docs: https://docs.expo.dev/build/introduction
- GitHub Pages Docs: https://docs.github.com/pages

## Important Notes

- **Render Free Tier**: Spins down after 15 minutes of inactivity (not recommended for production)
- **Standard Plan**: $7/month, no spin down, better for production
- **DNS Propagation**: Can take up to 48 hours but usually 1-4 hours
- **App Store Review**: Typically 1-7 days for both platforms
- **Auto-Deploy**: Render automatically deploys when you push to main branch

Good luck with your deployment! ðŸš€
